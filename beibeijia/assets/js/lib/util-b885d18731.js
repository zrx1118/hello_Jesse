define(["jquery"],function(d){!function(){window.prefix="";var t=document.createElement("div"),i=["webkit","moz","o"];for(var e in i)if(i[e]+"Transform"in t.style){window.prefix=i[e];break}}();var t=function(t){this.form=null,this.eles=[],this.data={},this.config={tipClass:".vf-tip",blurCheck:!1,ruleList:{"*":/[\w\W]+/,name:/^[a-zA-Z\u4e00-\u9fa5]{1,10}$/,enterpriseName:/[\u4e00-\u9fa5]+/,enterpriseIdCard:/[a-zA-Z0-9]+/,bankAccount:/[0-9]{5,30}/,homeTel:/[0-9-\(\)]+/,address:/^(?=.*?[\u4E00-\u9FA5])[\d\u4E00-\u9FA5]+/,tel:/^13[0-9]{9}$|14[0-9]{9}|15[0-9]{9}$|16[0-9]{9}|17[0-9]{9}|18[0-9]{9}|19[0-9]{9}$/,code:/^[\w\W]{4}$/,msgcode:/^[\w\W]{6}$/,password:/(?=.{6,16})(?=.*\d)(?=.*[a-z])[\x20-\x7f]*/i,pwd:/\d{6,16}/,regIdNo:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,regCapital:/^[1-9]{1}\d{0,12}(.\d{1,2})?$/,email:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,url:/^(\w+:\/\/)?\w+(\.\w+)+.*$/}}};t.prototype={constructor:t,init:function(t){var s=this,n=this.config;for(var i in t)if("ruleList"==i)for(var e in t[i])n[i][e]=t[i][e];else n[i]=t[i];return this.form=t.form,this.form.find(".vf-valid").each(function(t){var i=d(this).attr("data-nullmsg"),e=d(this).attr("data-errormsg");s.eles.push({obj:d(this),objId:d(this).attr("id"),objTip:d(this).siblings(n.tipClass),objIndex:t,name:d(this).attr("name"),rule:s._getRule(d(this).attr("data-type")),recheck:d(this).attr("recheck"),validDate:d(this).attr("validDate"),select:d(this).attr("select"),tipNull:i||"不能为空",tipError:e||"格式错误"})}),d.each(this.eles,function(t,i){i.validDate||i.obj.on("blur",function(){s._valid(i.objIndex,!0,!1)})}),this},_getRule:function(t){return t&&this.config.ruleList.hasOwnProperty(t)?new RegExp(this.config.ruleList[t]):""},_valid:function(t,i,e){var s=this.eles[t],n=s.obj.val(),a=!0;if(s.rule)(n||e)&&(a=s.rule.test(n),s.objTip.html(n?a?"":s.tipError:s.tipNull));else if(s.recheck){for(var o in this.eles)if(s.recheck==this.eles[o].name){n!=this.eles[o].obj.val()&&(a=!1),s.objTip.html(n?a?"":s.tipError:s.tipNull);break}}else if(s.validDate){for(var o in this.eles)if(s.validDate===this.eles[o].name){s.obj.attr("disabled")||(""===n?a=!1:new Date(n).getTime()<(new Date).getTime()&&(a=!1),s.objTip.html(n?a?"":s.tipError:s.tipNull));break}}else if(s.select)for(var o in this.eles)if(s.select==this.eles[o].name){var c=this.eles[o].obj.find(".select-seleted").attr("data-index");""===c&&(a=!1),s.objTip.html(c?a?"":s.tipError:s.tipNull);break}return i&&!a?(s.obj.addClass("failure"),s.objTip.fadeIn(100)):(s.obj.removeClass("failure"),s.objTip.fadeOut(100)),a},_getEleIndex:function(t){var i=null;for(var e in this.eles)if(this.eles[e].objId==t){i=e;break}return i},setRule:function(t,i){var e=this._getEleIndex(t);e&&(this.eles[e].rule=this._getRule(i))},showTip:function(t,i){var e=this._getEleIndex(t);e&&this.eles[e].objTip.html(i).fadeIn(100)},hideTip:function(t){var i=this._getEleIndex(t);i&&this.eles[i].objTip.html(text).fadeOut(100)},check:function(t,i){i=null==i||i;var e=this._getEleIndex(t);if(e)return this._valid(e,i,!0)},formCheck:function(t,i){t=null==t||t,i=null!=i&&i;var e={},s=!0;for(var n in this.eles)if(this._valid(n,t,!0))this.eles[n].select?e[this.eles[n].name]=this.eles[n].obj.find(".select-seleted").attr("data-index"):e[this.eles[n].name]=this.eles[n].obj.val();else if(s=!1,!i)return!1;return!!s&&e}};var i=function(){this.config={btnNext:null,btnPrev:null,viewNum:1,viewStart:0,viewBetween:0,speed:400,iEvent:"click",effect:"fade",scrollPage:!0,auto:0,mouseAutoStop:!0,indicator:null,indicatorEvent:null,onInit:null,onChangeEnd:null},this.oWrap=null,this.oContainer=null,this.aSlide=null,this.wrapWidth=0,this.slideWidth=0,this.iDistance=0,this.size=0,this.index=-1,this.maxIndex=0,this.prevIndex=0,this.timer=null,this.prefix=null,this.isMove=!1,this.isDrag=!1,this.dragInfo={startX:0,startY:0,position:0,distance:0,time:0}};i.prototype={constructor:i,init:function(t,i){var e=this.config;return i&&(d.extend(e,i),("scroll"!=e.effect||e.viewNum<1)&&(e.viewNum=1)),!!t&&(this.oWrap=t,this.oContainer=this.oWrap.find(".psSwiper-container"),this.aSlide=this.oWrap.find(".psSwiper-slide"),this.size=this.aSlide.length,!!this.size&&(this.__checkPrefix(),this.__layout(),this.__initIndicator(),this.__bindButton(),this.__changeIndex(e.viewStart,!0),this.autoStart(),e.mouseAutoStop&&this.__mouseAutoCtrl(),"scroll"==e.effect&&this.__bindDrag(),e.onInit&&"function"==typeof e.onInit&&e.onInit(this),this))},__checkPrefix:function(){var t=document.createElement("div"),i=["webkit","moz","o"];for(var e in i)if(i[e]+"Transform"in t.style){this.prefix=i[e];break}},__layout:function(){var t=this.config;switch(t.effect){case"scroll":this.wrapWidth=this.oWrap.width(),this.slideWidth=(this.wrapWidth-t.viewBetween*(t.viewNum-1))/t.viewNum,this.iDistance=t.scrollPage?(this.slideWidth+t.viewBetween)*t.viewNum:this.slideWidth+t.viewBetween,this.oContainer.addClass("psSwiper-container-scroll").css("width",this.slideWidth*this.size+t.viewBetween*(this.size-1)),this.aSlide.css("width",this.slideWidth),t.viewBetween&&this.aSlide.slice(0,this.size-1).css("marginRight",t.viewBetween),this.maxIndex=(t.scrollPage?Math.ceil(this.size/t.viewNum):this.size-t.viewNum+1)-1;break;default:this.oContainer.addClass("psSwiper-container-fade"),this.maxIndex=this.size-1}this.oContainer.addClass("psSwiper-container-"+("fade"==t.effect?"fade":"scroll"))},__initIndicator:function(){var t=this,i=this.config,e=i.indicator,s="";if(e&&e.length&&0<t.maxIndex){for(var n=0;n<=t.maxIndex;n++)s+='<span class="psSwiper-indicator-dot"></span>';e.append(s),i.indicatorEvent&&d("body").on(i.indicatorEvent,".psSwiper-indicator-dot",function(){t.__changeIndex(d(this).index())})}else e=null},__bindButton:function(){var t=this.config,i=this;t.btnNext&&t.btnNext.on(t.iEvent,function(){i.toNext()}),t.btnPrev&&t.btnPrev.on(t.iEvent,function(){i.toPrev()})},__changeFade:function(t){this.config;var i=this;this.aSlide.stop().eq(this.index).fadeIn(400,function(){i.__onChangeEnd(t)}).siblings().fadeOut()},__changeScroll:function(t){var i=this.config,e=this;this.prefix?this.oContainer.css(this.prefix+"Transition",i.speed+"ms").css(this.prefix+"Transform","translateX("+this.index*-this.iDistance+"px)").one(this.prefix+"TransitionEnd",function(){e.__onChangeEnd(t)}):this.oContainer.stop().animate({left:this.index*-this.iDistance},i.speed,function(){e.__onChangeEnd(t)})},__changeIndex:function(t,i){var e=this.config;if(!(this.isMove||this.index==t||e.viewNum>this.size))switch(this.prevIndex=0<=this.index?this.index:0,this.index=t,this.isMove=!0,e.indicator&&e.indicator.find("span").eq(this.index).addClass("act").siblings().removeClass("act"),e.effect){case"scroll":this.__changeScroll(i);break;default:this.__changeFade(i)}},__onChangeEnd:function(t){var i=this.config.onChangeEnd;!t&&i&&"function"==typeof i&&i(this),this.isMove=!1},__mouseAutoCtrl:function(){var t=this;this.config.mouseAutoStop&&this.oWrap.on("mouseenter",function(){clearTimeout(t.timer)}).on("mouseleave",function(){t.autoStart()})},__bindDrag:function(){var i=this;this.oContainer.on("mousedown",function(t){i.isMove||(i.isDrag=!0,i.dragInfo.startX=t.pageX,i.dragInfo.startY=t.pageY,i.dragInfo.position=i.index*-i.iDistance,i.dragInfo.time=(new Date).getTime(),i.dragInfo.distance=0)}).find("a").on("click",function(t){0!==i.dragInfo.distance&&t.preventDefault()}),d(document).on("mousemove",function(t){i.isDrag&&(t.preventDefault(),i.dragInfo.distance=i.dragInfo.startX-t.pageX,(0<i.dragInfo.position-i.dragInfo.distance||i.dragInfo.position-i.dragInfo.distance<-i.iDistance*i.maxIndex)&&(i.dragInfo.distance/=3),i.oContainer.css(i.prefix+"Transition","0ms").css(i.prefix+"Transform","translateX("+(i.dragInfo.position-i.dragInfo.distance)+"px)"))}).on("mouseup",function(t){i.isDrag&&(t.preventDefault(),i.isDrag=!1,0!==i.dragInfo.distance&&(Math.abs(i.dragInfo.distance)>Math.floor(i.iDistance/2.5)||100<Math.abs(i.dragInfo.distance)&&(new Date).getTime()-i.dragInfo.time<200?0<i.dragInfo.distance&&i.index<i.maxIndex?i.toNext():i.dragInfo.distance<0&&0<i.index?i.toPrev():i.__changeScroll():i.__changeScroll()))})},autoStop:function(){clearTimeout(this.timer)},autoStart:function(t){var i=this.config,e=this;t&&(i.auto=t),i.auto&&!isNaN(i.auto)&&(this.autoStop(),this.timer=setTimeout(function(){e.toNext(),e.autoStart()},i.auto))},toPrev:function(){this.__changeIndex(0<this.index?this.index-1:this.maxIndex)},toNext:function(){this.__changeIndex(this.index<this.maxIndex?this.index+1:0)},toIndex:function(t){this.__changeIndex(t)}};var e=function(){this.config={oWrap:null,onInit:null,onChange:null,search:!1,data:[],initCallback:null,defaultText:"请选择"},this.selected=d('<div class="select-seleted"></div>'),this.option=d('<div class="select-option"></div>'),this.options=d('<ul class="select-options"></ul>'),this.oSearch=d('<div class="select-search"><input type="text" name="search"/><i class="icon icon-search"></i></div>'),this.data=[],this.searchData=[],this.sildeDownStatus=!1,this.searchStatus=!1,this.index=-1,this.value=""};e.prototype={constructor:e,init:function(t){var i=this.config;return t&&d.extend(i,t),i.oWrap.append(this.selected,this.option),this.setOption(i.data),this.__bindEvent(),this.__onInit(),"function"==typeof i.initCallback&&i.initCallback(this),this},setOption:function(t,i,e){var s="";if(this.searchData=[],t&&t instanceof Array){for(var n in this.data=t,this.index=-1,this.config.search&&this.option.append(this.oSearch),this.option.append(this.options),this.data)s+='<li data-index="'+n+'">'+this.data[n].text+"</li>";this.options.html(s),this.setValue(i),this.option.stop().slideUp(200),e&&"function"==typeof e&&e(this)}},setValue:function(t){var i,e;t<0&&(t=parseInt(Math.abs(t)));var s=this.searchData.length?this.searchData:this.data;e=isNaN(t)?(this.index=-1,i="",this.config.defaultText):(s.length<=t&&(t=s.length-1),i=s[this.index=t].value,s[t].text),this.value=i,this.selected.html(e).attr("data-index",i),this.__onChange()},__bindEvent:function(){var a=this,t=this.config,i=t.oWrap.get(0);t.oWrap.on("click","li",function(){a.searchStatus=!1,a.setValue(d(this).attr("data-index"))}).on("click",".select-search",function(){d(this).find("input").on("keyup",function(t){t.stopPropagation();var e=d(this).val().trim(),s=[],i="";if(""!=e)if(d.each(a.data,function(t,i){-1!=i.text.indexOf(e)&&s.push(i)}),s.length){for(var n in s)i+='<li data-index="'+n+'">'+s[n].text+"</li>";a.searchData=s}else i+="<li>没有匹配项</li>",a.searchData=[];else{for(var n in a.data)i+='<li data-index="'+n+'">'+a.data[n].text+"</li>";a.searchData=[]}a.options.html(i)}).on("blur",function(){this.value=""}),a.searchStatus=!0}).on("click",".select-seleted",function(){a.searchStatus=!1}).on("click",function(t){a.data.length&&!a.searchStatus&&(a.sildeDownStatus=!a.sildeDownStatus,a.option.stop().slideToggle(200))}),d("body").click(function(t){!i.contains(t.target)&&i!==t.target&&a.sildeDownStatus&&(a.searchStatus=!1,a.sildeDownStatus=!1,a.option.stop().slideUp(200))})},__onInit:function(){var t=this.config.onInit;t&&"function"==typeof t&&t(this)},__onChange:function(){var t=this.config.onChange;t&&"function"==typeof t&&t(this)}};var s=function(){this.data={type:"",title:"",content:"",canClose:!0,submitText:"确定",cancelText:"取消",submitCallback:"",cancelCallback:"",initCallback:""},this.btnBox=d('<div class="modal-btn-box"></div>'),this.closeBtn=d('<a class="icon-modal modal-close"></a>'),this.modalBox=d('<div class="mask"></div>'),this.modalTitle="",this.modalContent="",this.modalMain=""};s.prototype={constructor:s,init:function(t){var i=this;switch(t&&d.extend(this.data,t),this.modalTitle=d('<div class="modal-title">'+this.data.title+"</div>"),this.modalContent=d('<div class="modal-content">'+this.data.content+"</div>"),3!=this.data.type?this.modalMain=d('<div class="modal-main"></div>'):this.modalMain=d('<div class="modal-main lg"></div>'),this.modalMain.append(this.modalTitle,this.modalContent).appendTo(this.modalBox),this.closeBtn.appendTo(this.modalMain).click(function(){i.close()}),this.data.type){case 0:i.__default();break;case 1:i.__alert();break;case 2:i.__confirm();break;case 3:i.__appoModal()}d("body").append(this.modalBox),this.data.initCallback&&this.data.initCallback(this)},__default:function(){},__alert:function(){var t=this,i=d('<a class="submit-btn">'+this.data.submitText+"</a>");this.btnBox.append(i).appendTo(this.modalContent),i.click(function(){t.data.submitCallback&&t.data.submitCallback(t),t.data.canClose&&t.close()})},__confirm:function(){var t=this,i=d('<a class="submit-btn">'+this.data.submitText+"</a>"),e=d('<a class="cancel-btn">'+this.data.cancelText+"</a>");this.btnBox.append(i,e).appendTo(this.modalContent),i.click(function(){t.data.submitCallback&&t.data.submitCallback(t),t.data.canClose&&t.close()}),e.click(function(){t.data.cancelCallback&&t.data.cancelCallback(t),t.data.canClose&&t.close()})},__appoModal:function(){var t=this,i=d('<a class="appo-submit-btn" id="appo-submit-btn">提交</a>'),e=d('<div class="appo-tips-box"><p class="text">预约后，理财顾问将在一个工作日内给您回电，为您提供一对一理财咨询服务。</p><p class="text">若想马上了解产品，请致电：<span>400-1056-588</span></p></div>');this.btnBox.append(i),this.modalContent.append(this.btnBox,e),i.click(function(){t.data.submitCallback&&t.data.submitCallback(t),t.data.canClose&&t.close()})},close:function(){this.modalBox.remove()}};var n=function(){this.init()};return n.prototype={constructor:n,init:function(){d("body").append('<div class="picshade"></div><div class="pictures_eyes"><div class="pictures_eyes_in"><div class="pictures_eyes_in-bg"><img src="" /><div class="next icon i-icon-arrow-right"></div><div class="prev icon i-icon-arrow-left"></div></div></div></div>')},look:function(t,i){if(t){var e,s=t,n=s.length-1,a=d(window).width(),o=d(window).height(),c=t.eq(i).find("img").attr("data-src");d(".pictures_eyes img").attr("src",c),d(".pictures_eyes img").load(function(){d(this).css({marginLeft:-d(this).width()/2,marginTop:-d(this).height()/2})}),e=i,r(d(".pictures_eyes")),d(".pictures_eyes_close,.picshade,.pictures_eyes").click(function(){d(".picshade,.pictures_eyes,.pictures_eyes_close,.pictures_eyes_indicators").hide(),d("body").css({overflow:"auto"})}),d(".pictures_eyes img").click(function(t){l(t)}),d(".next").click(function(t){e<n?e++:e=0;var i=s.eq(e).find("img").attr("data-src");d(".pictures_eyes img").attr("src",i),l(t),r(d(".pictures_eyes"))}),d(".prev").click(function(t){0<e?e--:e=n;var i=s.eq(e).find("img").attr("data-src");d(".pictures_eyes img").attr("src",i),l(t),r(d(".pictures_eyes"))})}function r(t){d("body").css({overflow:"hidden"});var i;t.width(),t.height();t.css({left:0,top:0,bottom:0}).show(),d(".picshade,.pictures_eyes_close").fadeIn(),i="",s.each(function(){var t=d(this).find("img").attr("src");i+='<a href="javascript:;"><img src="'+t+'"/></a>'}),d(".pictures_eyes_indicators").html(i).fadeIn(),d(".pictures_eyes_indicators a").eq(e).addClass("current").siblings().removeClass("current"),d(".pictures_eyes_indicators a").click(function(){d(this).addClass("current").siblings().removeClass("current");var t,i,e,s=d(this).find("img").attr("src");d(".pictures_eyes img").attr("src",s),t=d(".pictures_eyes"),i=t.width(),e=t.height(),t.css({left:(a-i)/2,top:(o-e)/2})})}function l(t){(t=t||window.event).stopPropagation?t.stopPropagation():t.cancelBubble=!0}}},{Swiper:i,Validate:t,Select:e,Modal:s,PicLook:n}});